<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagnóstico - Red de Salud de Caracas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* CSS personalizado (Opcional) */
        body { background-color: #f8f9fa; }
        .container { max-width: 1200px; margin-top: 30px; margin-bottom: 50px; }
        .form-section { padding: 20px; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 20px; background-color: #fff; }
    </style>
</head>
<body>
<div id="header-placeholder"></div>
<div class="container">

    <h1 class="my-4 text-center">FICHA DE DIAGNÓSTICO INICIAL</h1>
    <p class="text-center text-muted">Red de Salud de Caracas - Comisión Permanente de Salud</p>


    <div id="alert-container"></div> 

    <div class="form-section mb-4">
        <h4 id="form-title">Buscar o Registrar Centro de Salud</h4>
        
        <h6 class="mt-3">Tipo de Identificación:</h6>
        <div class="mb-3">
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="id-type" id="id-type-rif" value="RIF" checked>
                <label class="form-check-label" for="id-type-rif">RIF del Centro</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="id-type" id="id-type-ci" value="CI">
                <label class="form-check-label" for="id-type-ci">Cédula del Representante</label>
            </div>
        </div>
        
        <div class="input-group mb-3">
            <input type="text" class="form-control" id="rif-input" placeholder="Ingrese el RIF (J-XXXXXXXXX) o la Cédula (V-XXXXXXXXX)" aria-label="ID" required>
            <button class="btn btn-primary" type="button" id="search-btn">Buscar / Cargar</button>
            <button class="btn btn-secondary" type="button" id="new-record-btn" title="Limpiar campos y preparar nuevo registro">Nuevo Registro</button>
        </div>
    </div>

    <form id="diagnostico-form" class="d-none">
        
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation"><button class="nav-link active" id="datos-tab" data-bs-toggle="tab" data-bs-target="#datos" type="button" role="tab">I. Institución</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="autoridades-tab" data-bs-toggle="tab" data-bs-target="#autoridades" type="button" role="tab">II. Autoridades</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="servicios-tab" data-bs-toggle="tab" data-bs-target="#servicios" type="button" role="tab">III. Servicios Médicos</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="otros-servicios-tab" data-bs-toggle="tab" data-bs-target="#otros-servicios" type="button" role="tab">IV. Otros Servicios</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="infraestructura-tab" data-bs-toggle="tab" data-bs-target="#infraestructura" type="button" role="tab">V. Infraestructura</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="proyectos-tab" data-bs-toggle="tab" data-bs-target="#proyectos" type="button" role="tab">VI. Proyectos</button></li>
        </ul>

        <div class="tab-content border border-top-0 p-4" id="myTabContent">
            
            <div class="tab-pane fade show active form-section" id="datos" role="tabpanel">
                <h4>I. Datos de la Institución</h4>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="nombre-institucion" class="form-label">Nombre de la Institución</label>
                        <input type="text" class="form-control" id="nombre-institucion" required>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="parroquia" class="form-label">Parroquia</label>
                        <select class="form-select" id="parroquia" required>
                            <option value="" disabled selected>Seleccione una Parroquia</option>
                        </select>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label for="direccion" class="form-label">Dirección</label>
                    <input type="text" class="form-control" id="direccion" required>
                </div>

                <h5 class="mt-4">Tipo de Institución</h5>
                <div class="mb-3" id="tipo-institucion-container">
                    
                </div>

                <h5 class="mt-4">Ente Adscrito</h5>
                <div class="mb-3" id="ente-adscrito-container">
                    
                </div>

                <h5 class="mt-4">Geolocalización</h5>
                <div class="row">
                    <div class="col-md-4 mb-3"><label for="longitud" class="form-label">Longitud</label><input type="text" class="form-control" id="longitud"></div>
                    <div class="col-md-4 mb-3"><label for="latitud" class="form-label">Latitud</label><input type="text" class="form-control" id="latitud"></div>
                    <div class="col-md-4 mb-3"><label for="punto-referencia" class="form-label">Punto de Referencia</label><input type="text" class="form-control" id="punto-referencia"></div>
                </div>
                <h5 class="mt-4">Foto de la Fachada</h5>
                <div class="mb-3">
                    <label for="foto-fachada" class="form-label">Adjuntar foto de la fachada del centro de salud (JPEG/PNG)</label>
                    <input class="form-control" type="file" id="foto-fachada" accept="image/jpeg, image/png">
                </div>
                <div class="mb-3" id="foto-fachada-preview-container">
                    <img id="foto-fachada-preview" src="#" alt="Vista previa de la fachada" class="img-fluid rounded border d-none" style="max-height: 200px;">
                </div>
            </div>

            <div class="tab-pane fade form-section" id="autoridades" role="tabpanel">
                <h4>II. Datos de las Autoridades de la Institución</h4>
                <div id="autoridades-container"></div> 

                <div class="mb-3">
                    <label for="observaciones-autoridades" class="form-label">OBSERVACIONES AUTORIDADES:</label>
                    <textarea class="form-control" id="observaciones-autoridades" rows="3"></textarea>
                </div>
            </div>

            <div class="tab-pane fade form-section" id="servicios" role="tabpanel">
                <h4>III. Servicios de Especialidades Médicas Prestados</h4>
                <div class="table-responsive mb-4">
                    <table class="table table-sm table-bordered align-middle">
                        <thead class="table-light">
                            <tr>
                                <th style="width: 20%;">Servicio</th>
                                <th style="width: 10%;">ACTIVO</th>
                                <th style="width: 12%;">ACTIVO C/PROB</th>
                                <th style="width: 10%;">INACTIVO</th>
                                <th style="width: 10%;">NO EXISTE</th>
                                <th style="width: 38%;">PRESTACIÓN SERVICIO (Día y Horario)</th>
                            </tr>
                        </thead>
                        <tbody id="servicios-medicos-body">
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="tab-pane fade form-section" id="otros-servicios" role="tabpanel">
                <h4>IV. Otros Servicios Prestados</h4>
                <div id="otros-servicios-container"></div>

                <div class="mb-3">
                    <label for="observaciones-otros-servicios" class="form-label">OBSERVACIONES OTROS SERVICIOS PRESTADOS:</label>
                    <textarea class="form-control" id="observaciones-otros-servicios" rows="3"></textarea>
                </div>
            </div>

            <div class="tab-pane fade form-section" id="infraestructura" role="tabpanel">
                <h4>V. Datos de Infraestructura y Servicios Públicos</h4>
                
                <h5 class="mt-4">A. Estado de la Infraestructura (BUENAS / REGULAR / MALAS CONDICIONES)</h5>
                <div class="table-responsive mb-4">
                    <table class="table table-sm table-bordered align-middle">
                        <thead class="table-light">
                            <tr>
                                <th style="width: 20%;">Área</th>
                                <th>Paredes</th>
                                <th>Pisos</th>
                                <th>Techos</th>
                                <th>A/A</th>
                            </tr>
                        </thead>
                        <tbody id="condiciones-infraestructura-body">
                        </tbody>
                    </table>
                </div>

                <h5 class="mt-4">B. Servicios Públicos y Disponibilidad</h5>
                <div class="table-responsive mb-4">
                    <table class="table table-sm table-bordered align-middle">
                        <thead class="table-light">
                            <tr>
                                <th style="width: 20%;">Servicio</th>
                                <th>Disponibilidad</th>
                                <th>Observación / Notas</th>
                            </tr>
                        </thead>
                        <tbody id="servicios-publicos-body">
                        </tbody>
                    </table>
                </div>

                <div class="mb-3">
                    <label for="observaciones-infraestructura" class="form-label">OBSERVACIONES INFRAESTRUCTURA Y SERVICIOS PÚBLICOS:</label>
                    <textarea class="form-control" id="observaciones-infraestructura" rows="3"></textarea>
                </div>
            </div>

            <div class="tab-pane fade form-section" id="proyectos" role="tabpanel">
                <h4>VI. Proyectos de Mejoras (Máximo 5 por Categoría)</h4>
                <p class="text-muted">Describa los proyectos prioritarios de mejoras en cada área solicitada.</p>

                <div id="proyectos-container"></div>

                <h4 class="mt-5">VII. Observaciones Generales</h4>
                <div class="mb-3">
                    <label for="observaciones-generales" class="form-label">OBSERVACIONES GENERALES DEL DIAGNÓSTICO:</label>
                    <textarea class="form-control" id="observaciones-generales" rows="4"></textarea>
                </div>
            </div>
        </div>

        <div class="text-center mt-4">
            <button type="submit" class="btn btn-success btn-lg" id="submit-btn">Guardar Registro</button>
        </div>

    </form>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="data.js" type="module"></script>
<script src="storage.js" type="module"></script>
<script src="section_I.js" type="module"></script>
<script src="section_II.js" type="module"></script>
<script src="section_III.js" type="module"></script>
<script src="section_IV.js" type="module"></script>
<script src="section_V.js" type="module"></script>
<script src="section_VI.js" type="module"></script>
<script src="main.js" type="module"></script>
<script type="module" src="header.js"></script>
</body>
</html>